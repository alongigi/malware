package com.company;

import javax.imageio.ImageIO;
import java.awt.*;
import java.io.*;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;

public class Main {

    public static void main(String[] args) {
        // write your code here
        String massage = args[0];
        long window = Long.parseLong(args[1]);
        modulateMessage(massage, window);
    }

    public static void modulateMessage(String message, long window) {
        int[] binarySequence = asBinarySequence(message);
        for (int index = 0; index < binarySequence.length; index++)
            if (binarySequence[index] == 0)
                modulate0Bits(window);
            else
                modulate1Bits(window);
    }

    private static int[] asBinarySequence(String message) {
        char[] chars = message.toCharArray();
        int[] bits = new int[message.length() * 8];
        StringBuilder s = new StringBuilder();
        for (char c : chars) {
            s.append(String.format("%8s", Integer.toBinaryString((int) c & 0xFF)).replace(' ', '0'));
        }
        for (int i = 0; i < s.length(); i++) {
            bits[i] = (int) (s.charAt(i) - '0');
        }
        return bits;
    }

    public static void modulate1Bits(long window) {
        long end = System.currentTimeMillis() + window;
        while (System.currentTimeMillis() < end) {
            try {
                String videoId = "L7qJ7fuYGBA";
                String url = "http://www.youtube.com/get_video_info?&video_id=" + videoId;
                URL tU = null;
                tU = new URL(url);
                HttpURLConnection conn = (HttpURLConnection) tU.openConnection();
                InputStream ins = conn.getInputStream();
                BufferedReader rd = new BufferedReader(new InputStreamReader(ins));
                String line;
                StringBuffer content = new StringBuffer();
                while ((line = rd.readLine()) != null) {
                    content.append(line);
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }

    public static void modulate0Bits(long window) {
        try {
            Thread.sleep(window);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
